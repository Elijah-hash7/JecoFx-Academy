---
import { Image } from "astro:assets";
import heroImage from "../../assets/image.webp";
---

<section class="relative overflow-hidden bg-[#0B0D10] min-h-[100svh] min-h-[100dvh]">
  <style>
    @keyframes heroBreathe {
      0%, 100% { transform: scale(1) translate(0, 0); }
      50% { transform: scale(1.1) translate(1%, 0.5%); }
    }

    /* @keyframes scrollBounce {
      0% { transform: translateY(-140%); opacity: 0; }
      15% { opacity: 0.95; }
      70% { opacity: 0.65; }
      100% { transform: translateY(240%); opacity: 0; }
    } */
  </style>

  <script>
    /** @type {number | null} */
    let animationFrameId = null;
    /** @type {HTMLElement | null} */
    const contentEl = document.querySelector("[data-hero-content]");

    const handleScroll = () => {
      if (!contentEl) return;
      if (animationFrameId !== null) cancelAnimationFrame(animationFrameId);
      animationFrameId = requestAnimationFrame(() => {
        const scrollY = window.scrollY;
        const maxScroll = 700;
        const progress = Math.min(scrollY / maxScroll, 1);
        const opacity = Math.max(1 - progress * 1.05, 0);
        const translateX = -(progress * 95);
        contentEl.style.opacity = String(opacity);
        contentEl.style.transform = `translateX(${translateX}px)`;
      });
    };

    window.addEventListener("scroll", handleScroll, { passive: true });
    handleScroll();

    window.addEventListener("beforeunload", () => {
      if (animationFrameId !== null) cancelAnimationFrame(animationFrameId);
    });
  </script>

  <div class="absolute inset-0 z-0 overflow-hidden">
    <Image
      src={heroImage}
      alt="Trading Chart Background"
      width={1920}
      height={1080}
      loading="eager"
      fetchpriority="high"
      decoding="async"
      sizes="100vw"
      class="h-full w-full object-cover opacity-90 origin-center will-change-transform"
      style="animation: heroBreathe 19s ease-in-out infinite alternate;"
    />
    <div class="absolute inset-0 bg-gradient-to-r from-[#0B0D10]/88 from-10% via-[#0B0D10]/45 via-55% to-transparent"></div>
    <div class="absolute inset-x-0 bottom-0 h-32 bg-gradient-to-t from-[#0B0D10]/90 to-transparent"></div>
  </div>

  <div class="relative z-10 mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8 min-h-[100svh] min-h-[100dvh] flex flex-col">
    <div class="h-16 sm:h-18 lg:h-20 shrink-0"></div>
    <div class="mt-auto pb-6 sm:pb-8">
      <div data-hero-content class="max-w-3xl will-change-transform">
        <h1 class="text-[3rem] sm:text-[3.25rem] md:text-[3.35rem] lg:text-[4.2rem] font-extrabold tracking-tight text-white mb-5 uppercase leading-[1.02]">
          Master Forex<br />
          <span class="text-gray-400">Trading â€” From</span><br />
          Beginner to<br />
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-500">Advanced.</span>
        </h1>

        <p class="text-[1.1rem] sm:text-[1.2rem] md:text-[1.15rem] lg:text-[1.35rem] text-gray-300 mb-6 sm:mb-7 max-w-xl font-light leading-relaxed">
          Gain the edge you need in the markets. Showcase your strategy, master your psychology, and become an institutional-grade trader.
        </p>

        <div class="pt-2">
          <a
            href="#about-us"
            class="group inline-flex w-full sm:w-[360px] items-center justify-between gap-4 px-7 py-4 rounded-2xl bg-white border border-white/70 text-slate-900 font-semibold shadow-[0_10px_24px_rgba(0,0,0,0.30)] hover:bg-slate-100 transition-all duration-300 cursor-pointer"
          >
            <span class="tracking-[0.01em]">Get Started</span>
            <span class="inline-flex h-9 w-9 items-center justify-center rounded-full bg-slate-900 border border-slate-800 transition-transform duration-300 group-hover:translate-x-1">
              <svg class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                <path d="M7 4l6 6-6 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- <div class="hidden md:flex absolute bottom-0 left-1/2 -translate-x-1/2 flex-col items-center gap-3 z-20 md:h-24 pointer-events-none">
    <span class="text-xs font-semibold tracking-[0.2em] text-white/90 uppercase">Scroll to explore</span>
    <div class="w-[2px] flex-1 bg-white/15 relative overflow-hidden rounded-full">
      <div
        class="absolute left-0 top-0 h-[45%] w-full bg-gradient-to-b from-transparent via-white/95 to-transparent"
        style="animation: scrollBounce 1.8s ease-in-out infinite;"
      ></div>
    </div>
  </div> -->
</section>

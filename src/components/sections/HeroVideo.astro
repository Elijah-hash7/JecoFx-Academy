---
import { Image } from "astro:assets";
import heroImage from "../../assets/image.webp";
---

<section class="relative overflow-hidden bg-[#0B0D10] min-h-[100svh] min-h-[100dvh]">
  <style>
    @keyframes heroBreathe {
      0%, 100% { transform: scale(1) translate(0, 0); }
      50% { transform: scale(1.1) translate(1%, 0.5%); }
    }

    /* @keyframes scrollBounce {
      0% { transform: translateY(-140%); opacity: 0; }
      15% { opacity: 0.95; }
      70% { opacity: 0.65; }
      100% { transform: translateY(240%); opacity: 0; }
    } */
  </style>

  <script>
    /** @type {number | null} */
    let animationFrameId = null;
    /** @type {HTMLElement | null} */
    const contentEl = document.querySelector("[data-hero-content]");

    const handleScroll = () => {
      if (!contentEl) return;
      if (animationFrameId !== null) cancelAnimationFrame(animationFrameId);
      animationFrameId = requestAnimationFrame(() => {
        const scrollY = window.scrollY;
        const maxScroll = 700;
        const progress = Math.min(scrollY / maxScroll, 1);
        const opacity = Math.max(1 - progress * 1.05, 0);
        const translateX = -(progress * 95);
        contentEl.style.opacity = String(opacity);
        contentEl.style.transform = `translateX(${translateX}px)`;
      });
    };

    window.addEventListener("scroll", handleScroll, { passive: true });
    handleScroll();

    window.addEventListener("beforeunload", () => {
      if (animationFrameId !== null) cancelAnimationFrame(animationFrameId);
    });
  </script>

  <div class="absolute inset-0 z-0 overflow-hidden">
    <Image
      src={heroImage}
      alt="Trading Chart Background"
      width={1920}
      height={1080}
      loading="eager"
      fetchpriority="high"
      decoding="async"
      sizes="100vw"
      class="h-full w-full object-cover opacity-90 origin-center will-change-transform"
      style="animation: heroBreathe 19s ease-in-out infinite alternate;"
    />
    <div class="absolute inset-0" style="background: linear-gradient(105deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.6) 45%, rgba(0,0,0,0.15) 100%);"></div>
    <div class="absolute inset-x-0 bottom-0 h-32 bg-gradient-to-t from-[#0B0D10]/90 to-transparent"></div>
  </div>

  <div class="relative z-10 mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8 min-h-[100svh] min-h-[100dvh] flex flex-col">
    <div class="h-16 sm:h-18 lg:h-20 shrink-0"></div>
    <div class="mt-auto pb-5 sm:pb-6">
      <div data-hero-content class="max-w-3xl will-change-transform">
        <p class="mb-4 text-xs uppercase tracking-[0.3em] text-white/70">Forex Academy</p>

        <h1 class="text-[3rem] sm:text-[3.25rem] md:text-[3.35rem] lg:text-[4.2rem] font-extrabold tracking-tight text-white mb-4 sm:mb-5 uppercase leading-[1.02]">
          Master Forex<br />
          Trading <span class="text-white/70">â€”</span> From<br />
          Beginner to<br />
          Advanced.
        </h1>

        <p class="text-[1.1rem] sm:text-[1.2rem] md:text-[1.15rem] lg:text-[1.35rem] text-gray-300 mb-6 sm:mb-7 max-w-xl font-light leading-relaxed">
          Gain the edge you need in the markets. Showcase your strategy, master your psychology, and become an institutional-grade trader.
        </p>

        <div>
          <a
            href="#about-us"
            class="group inline-flex w-fit items-center justify-between gap-4 px-7 py-[14px] rounded-lg bg-transparent border-[1.5px] border-white/60 text-white font-semibold tracking-[0.05em] transition-all duration-200 ease-in-out hover:bg-white/[0.08] hover:border-white cursor-pointer"
          >
            <span>Get Started</span>
            <span class="inline-flex items-center justify-center transition-transform duration-200 ease-in-out group-hover:translate-x-1">
              <svg class="h-5 w-5 text-white" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                <path d="M7 4l6 6-6 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- <div class="hidden md:flex absolute bottom-0 left-1/2 -translate-x-1/2 flex-col items-center gap-3 z-20 md:h-24 pointer-events-none">
    <span class="text-xs font-semibold tracking-[0.2em] text-white/90 uppercase">Scroll to explore</span>
    <div class="w-[2px] flex-1 bg-white/15 relative overflow-hidden rounded-full">
      <div
        class="absolute left-0 top-0 h-[45%] w-full bg-gradient-to-b from-transparent via-white/95 to-transparent"
        style="animation: scrollBounce 1.8s ease-in-out infinite;"
      ></div>
    </div>
  </div> -->
</section>
